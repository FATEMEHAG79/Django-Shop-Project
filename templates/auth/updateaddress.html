{%extends 'base.html'%}
{% block content %}
{%load static%}
  <div class="error-section">
        <div class="container">
            <div class="row">
                {% for add in address %}
                    <form  id="updateaddress">
                        {% csrf_token %}
                        <h4 style="color:red;"></h4>
                        <br>
                        <div class="col-12">
                            <div class="default-form-box">
                                <label>First Name <span>*</span></label>
                                <input type="text" value="{{ add.first_name_recivier }}" name="first_name_recivier" id="first_name_recivier" required>
                            </div>
                        </div>
                        <div class="col-12">
                            <div class="default-form-box">
                                <label>Last Name <span>*</span></label>
                                <input type="text" value="{{ add.last_name_recivier }}" name="last_name_recivier" id="last_name_recivier" required>
                            </div>
                        </div>
                        <div class="col-12">
                            <div class="select_form_select default-form-box">
                                <label for="countru_name">Province <span>*</span></label>
                                <select class="niceselect_option wide" value="{{ add.province }}" name="province"  id="province" required>
                                    <option value="{{ add.province }}">{{ add.province }}</option>
                                    <option value="Tehran">Tehran</option>
                                    <option value="Gilan">Gilan</option>
                                    <option value="East Azerbaijan">East Azerbaijan</option>
                                    <option value="Khuzestan">Khuzestan</option>
                                    <option value="Fars">Fars</option>
                                    <option value="Isfahan">Isfahan</option>
                                    <option value="Razavi Khorasan">Razavi Khorasan</option>
                                    <option value="Qazvin">Qazvin</option>
                                    <option value="Semnan">Semnan</option>
                                    <option value="Qom">Qom</option>
                                    <option value="Markazi">Markazi</option>
                                    <option value="Zanjan">Zanjan</option>
                                    <option value="Mazandaran">Mazandaran</option>
                                    <option value="Golestan">Golestan</option>
                                    <option value="Ardabil">Ardabil</option>
                                    <option value="West Azerbaijan">West Azerbaijan</option>
                                    <option value="Hamadan">Hamadan</option>
                                    <option value="Kurdistan">Kurdistan</option>
                                    <option value="Kermanshah">Kermanshah</option>
                                    <option value="Lorestan">Lorestan</option>
                                    <option value="Bushehr">Bushehr</option>
                                    <option value="Kerman">Kerman</option>
                                    <option value="Hormozgan">Hormozgan</option>
                                    <option value="Chaharmahal and Bakhtiari">Chaharmahal and Bakhtiari</option>
                                    <option value="Yazd">Yazd</option>
                                    <option value="Sistan and Baluchestan">Sistan and Baluchestan</option>
                                    <option value="Ilam">Ilam</option>
                                    <option value="Kohgiluyeh and Boyer-Ahmad">Kohgiluyeh and Boyer-Ahmad</option>
                                    <option value="North Khorasan">North Khorasan</option>
                                    <option value="South Khorasan">South Khorasan</option>
                                    <option value="Alborz">Alborz</option>
                                </select>
                            </div>
                        </div>
                         <div class="col-12">
                            <div class="select_form_select default-form-box">
                               <div class="default-form-box">
                                <label>city <span>*</span></label>
                                <input  type="text" value="{{ add.city }}" name="city" id="city" required>
                                </div>
                            </div>
                         </div>
                        <div class="col-12">
                            <div class="default-form-box">
                                <label>address <span>*</span></label>
                                <input  type="text"  value="{{ add.apartment_address }}" name="apartment_address" id="apartment_address" required>
                            </div>
                        </div>
                        <div class="col-12">
                            <div class="default-form-box">
                                <label>zip code <span>*</span></label>
                                <input type="text"  value="{{ add.zip }}" name="zip" id="zip" required>
                            </div>
                        </div>
                        <div class="col-12">
                            <div class="default-form-box">
                                <label>Phone<span>*</span></label>
                                <input type="text"  value="{{ add.phone_number_reciver }}" name="phone_number_reciver" id="phone_number_reciver" required>
                            </div>
                        </div>
                         <div class="save_button mt-3">
                            <button class="btn btn-md btn-black-default-hover"
                                type="submit">Save</button>
                        </div>
                     </form>

                    <a href="{%  url "profile" request.user.slug %}"> <br><button class="btn btn-md btn-black-default-hover"
                                type="submit">profile</button></a>
                       <script type="text/javascript">
        $(document).on("submit" , "#updateaddress" , function(e){
            e.preventDefault();
            $.ajax({
                type: "POST",
                url: "{% url "updateaddress"  add.id %}",
                data:{
                    province : $("#province").val(),
                    city : $("#city").val(),
                    first_name_recivier : $("#first_name_recivier").val(),
                    last_name_recivier : $("#last_name_recivier").val(),
                    apartment_address : $("#apartment_address").val(),
                    zip : $("#zip").val(),
                    phone_number_reciver : $("#phone_number_reciver").val(),
                    csrfmiddlewaretoken: $("input[name=csrfmiddlewaretoken]").val(),
                },
                success: function(data){
                    $("h4").html(data);
                }
            })
        })
    </script>
                {% endfor %}
            </div>
        </div>
  </div>
{% endblock %}
